"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[576],{576:(e,t,r)=>{r.r(t),r.d(t,{default:()=>p});var n=r(5155),a=r(5910),s=r.n(a),o=r(2115);let l=e=>{let{primeCount:t,isLoading:r,angleDelta:a,showConnector:s,onPrimeCountChange:l,onAngleDeltaChange:i,onUpdatePrimes:u,onResetCamera:c,onToggleConnector:d}=e,[m,h]=(0,o.useState)(!1),[f,p]=(0,o.useState)(null),[x,g]=(0,o.useState)(null);return(0,o.useEffect)(()=>{let e=e=>{let t=document.getElementById("prime-controls-drawer");t&&!t.contains(e.target)&&h(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,n.jsx)("div",{className:"absolute inset-0 pointer-events-none",style:{zIndex:10},children:(0,n.jsxs)("div",{id:"prime-controls-drawer",className:"fixed md:absolute bottom-0 left-0 right-0 md:left-4 md:bottom-4 md:w-80 bg-white rounded-t-2xl md:rounded-lg shadow-lg transition-transform duration-300 ease-in-out pointer-events-auto\n          ".concat(m?"translate-y-0":"translate-y-[calc(100%-2rem)] md:translate-y-0"),onTouchStart:e=>{m&&(e.stopPropagation(),p(e.touches[0].clientY))},onTouchMove:e=>{m&&(e.stopPropagation(),g(e.touches[0].clientY))},onTouchEnd:()=>{if(m&&f&&x){let e=f-x;Math.abs(e)>50&&(e>0&&!m?h(!0):e<0&&m&&h(!1)),p(null),g(null)}},children:[(0,n.jsx)("div",{className:"md:hidden h-8 flex items-center justify-center border-b border-gray-200 cursor-pointer",onClick:()=>{h(!m)},children:(0,n.jsx)("svg",{className:"w-6 h-6 text-gray-500 transition-transform duration-300 ".concat(m?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})}),(0,n.jsx)("div",{className:"p-4",children:(0,n.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("label",{htmlFor:"primeCount",className:"absolute -top-2 left-2 bg-white px-1 text-xs text-gray-600",children:"Number of Primes"}),(0,n.jsx)("input",{id:"primeCount",type:"number",min:"10",max:"100000",value:t,onChange:l,onBlur:()=>u(t),onKeyDown:e=>{"Enter"!==e.key||r||u(t)},className:"w-full px-3 py-2 border text-black border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 pt-3",disabled:r})]}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("label",{htmlFor:"angleDelta",className:"absolute -top-2 left-2 bg-white px-1 text-xs text-gray-600",children:"Angle Delta (degrees)"}),(0,n.jsx)("input",{id:"angleDelta",type:"number",min:"0.1",max:"179.9",step:"0.1",value:a,onChange:i,className:"w-full px-3 py-2 border text-black border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 pt-3",disabled:r})]}),(0,n.jsxs)("div",{className:"flex items-center mt-2",children:[(0,n.jsx)("input",{id:"showConnector",type:"checkbox",onChange:d,checked:s,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",disabled:r}),(0,n.jsx)("label",{htmlFor:"showConnector",className:"ml-2 block text-sm text-gray-900",children:"Link Primes"})]}),(0,n.jsx)("div",{className:"flex flex-col space-y-2",children:(0,n.jsx)("button",{onClick:c,disabled:r,className:"w-full px-4 py-2 bg-gray-500 text-white rounded-md shadow-sm hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 disabled:opacity-50",children:"Reset Camera"})})]})})]})})};var i=r(7431),u=r(3264),c=r(5416),d=r(3756),m=r(4135);let h=e=>{let{prime:t,position:r,scale:n,color:a,font:s,group:o}=e,{x:l,y:i}=r,c=new u.Gu$(.5*n,32,32),d=new u.V9B({color:a,transparent:!0,opacity:.8}),h=new u.eaF(c,d);h.position.set(l,i,0),h.userData={type:"prime",prime:t},o.add(h);let f=new m._(t.toString(),{font:s,size:.3*n,depth:.05*n,curveSegments:4,bevelEnabled:!0,bevelThickness:.02*n,bevelSize:.02*n,bevelSegments:1});f.computeBoundingBox();let p=f.boundingBox?f.boundingBox.max.x-f.boundingBox.min.x:0,x=f.boundingBox?f.boundingBox.max.y-f.boundingBox.min.y:0,g=[new u.V9B({color:0xffffff}),new u.V9B({color:0})],b=new u.eaF(f,g),w=.5*n;b.position.set(l,i,1.6*w);let v=.8*w/Math.max(p,x,.001);return b.scale.set(v,v,v),b.userData={type:"label",prime:t},b.visible=!1,o.add(b),{sphere:h,textMesh:b}},f=e=>{let{width:t,height:r,primes:a,angleDelta:s,showConnector:l,setPosition:m,setZoom:f,position:p}=e,x=(0,o.useRef)(null),g=(0,o.useRef)(null),b=(0,o.useRef)(null),w=(0,o.useRef)(null),v=(0,o.useRef)(null),y=(0,o.useRef)(null),N=(0,o.useRef)(null),P=(0,o.useRef)(null),j=(0,o.useRef)(null),E=(0,o.useRef)(!1),M=(0,o.useRef)(null);(0,o.useEffect)(()=>{if(!x.current)return;let e=new i.JeP({canvas:x.current,antialias:!0,alpha:!0});e.setSize(t,r),e.setPixelRatio(window.devicePixelRatio||1),g.current=e;let n=new u.Z58;n.background=new u.Q1f(0xffffff),b.current=n;let s=new u.ubm(75,t/r,.1,1e3);s.position.set(0,0,20),w.current=s;let o=new c.N(s,e.domElement);o.enableDamping=!0,o.dampingFactor=.25,o.screenSpacePanning=!0,o.enablePan=!0,o.panSpeed=1,o.mouseButtons={LEFT:u.kBv.ROTATE,MIDDLE:u.kBv.DOLLY,RIGHT:u.kBv.PAN},o.touches={ONE:u.wtR.ROTATE,TWO:u.wtR.PAN},o.minPolarAngle=0,o.maxPolarAngle=Math.PI,o.minAzimuthAngle=-Math.PI/2,o.maxAzimuthAngle=Math.PI/2;let l=.01*Math.max(...a);o.minDistance=1,o.maxDistance=10*l,o.target.set(0,0,0),o.addEventListener("change",()=>{let e=o.object,t=o.target,r=Math.atan2(e.position.x-t.x,e.position.z-t.z);r<-Math.PI/2?(e.position.x=t.x+Math.sin(-Math.PI/2)*e.position.distanceTo(t),e.position.z=t.z+Math.cos(-Math.PI/2)*e.position.distanceTo(t)):r>Math.PI/2&&(e.position.x=t.x+Math.sin(Math.PI/2)*e.position.distanceTo(t),e.position.z=t.z+Math.cos(Math.PI/2)*e.position.distanceTo(t)),t.z<0&&(t.z=0)}),v.current=o;let m=new u.fTw(200,2e3,8947848,0xcccccc);m.rotation.x=Math.PI/2,n.add(m),N.current=m;let h=new u.IzY(5);n.add(h),k();let f=new u.YJl;b.current.add(f),y.current=f;let p=()=>{if(!b.current||!w.current||!g.current)return;v.current&&v.current.update();let e=10/w.current.position.distanceTo(new u.Pq0(0,0,0));b.current&&b.current.traverse(t=>{t.userData&&"label"===t.userData.type&&(t.quaternion.copy(w.current.quaternion),t.visible=e>1.5)}),g.current.render(b.current,w.current),requestAnimationFrame(p)};p();let M=()=>{w.current&&g.current&&(w.current.aspect=t/r,w.current.updateProjectionMatrix(),g.current.setSize(t,r))};return window.addEventListener("resize",M),new d.J().load("fonts/helvetiker_regular.typeface.json",e=>{j.current=e,E.current=!0,y.current&&b.current&&a.length>0&&R()}),()=>{window.removeEventListener("resize",M),P.current&&cancelAnimationFrame(P.current),g.current&&g.current.dispose(),v.current&&v.current.dispose(),k(),N.current&&(N.current.geometry.dispose(),N.current.material instanceof u.imn?N.current.material.dispose():Array.isArray(N.current.material)&&N.current.material.forEach(e=>e.dispose()),n.remove(N.current))}},[t,r,m,f]),(0,o.useEffect)(()=>{if(b.current&&y.current&&(M.current&&(b.current.remove(M.current),M.current=null),l&&y.current.children.length>0)){let e=[];y.current.children.forEach(t=>{e.push(t.position.clone())});let t=new u.LoY().setFromPoints(e),r=new u.mrM({color:35071,linewidth:2}),n=new u.N1A(t,r);b.current.add(n),M.current=n}},[l,a]);let k=()=>{if(b.current&&y.current){for(;y.current.children.length>0;){let e=y.current.children[0];e instanceof u.eaF&&(e.geometry.dispose(),e.material instanceof u.imn?e.material.dispose():Array.isArray(e.material)&&e.material.forEach(e=>e.dispose())),y.current.remove(e)}b.current.remove(y.current)}M.current&&b.current&&(b.current.remove(M.current),M.current=null)},R=()=>{if(b.current&&j.current&&y.current&&0!==a.length){for(;y.current.children.length>0;){let e=y.current.children[0];y.current.remove(e),e instanceof u.eaF&&(e.geometry.dispose(),Array.isArray(e.material)?e.material.forEach(e=>e.dispose()):e.material.dispose())}a.forEach((e,t)=>{let r=s*Math.PI/180*t,n=.01*e,o=n*Math.cos(r),l=n*Math.sin(r),i=t/(a.length-1),c=new u.Q1f;c.setRGB(1-.5*i,0,.5*i);let d=.05+.02*Math.log(e);h({prime:e,position:{x:o,y:l},scale:d,color:c,font:j.current,group:y.current})})}};return(0,o.useEffect)(()=>{E.current&&R()},[a,s]),(0,o.useEffect)(()=>{if(w.current&&v.current){let{x:e,y:t,z:r}=p;w.current.position.set(e,t,r),v.current.target.set(0,0,0),v.current.update()}},[p]),(0,n.jsx)("canvas",{ref:x,width:t,height:r,className:"w-full h-full absolute inset-0",style:{display:"block",zIndex:1}})},p=e=>{let{width:t,height:r}=e,[a,i]=(0,o.useState)(300),[u,c]=(0,o.useState)(!0),[d,m]=(0,o.useState)({x:0,y:0,z:20}),[,h]=(0,o.useState)(1),[p,x]=(0,o.useState)(36),[g,b]=(0,o.useState)(!1),[w,v]=(0,o.useState)([]),y=(0,o.useRef)(null);return((0,o.useEffect)(()=>{let e=s()(),t=[];for(let r=0;r<a;r++){let r=e.next();if(r.done)break;t.push(r.value)}v(t),c(!1)},[a]),u)?(0,n.jsx)("div",{children:"Loading..."}):(0,n.jsxs)("div",{className:"flex flex-col md:flex-row w-full h-full",children:[(0,n.jsx)(l,{primeCount:a,isLoading:u,angleDelta:p,showConnector:g,onPrimeCountChange:e=>{let t=parseInt(e.target.value);!isNaN(t)&&t>0&&t<=1e5&&i(t)},onAngleDeltaChange:e=>{let t=parseFloat(e.target.value);!isNaN(t)&&t>0&&t<180&&x(t)},onUpdatePrimes:e=>i(e),onResetCamera:()=>{m({x:0,y:0,z:20}),h(1),y.current&&(y.current.target.set(0,0,0),y.current.update())},onToggleConnector:e=>{b(e.target.checked)}}),(0,n.jsx)(f,{width:t,height:r,primes:w,angleDelta:p,showConnector:g,setPosition:m,setZoom:h,position:d})]})}}}]);